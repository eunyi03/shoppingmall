{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import CRUDHeader from'./CRUDHeader';import'./CRUD.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function UpdateNotice(){const{no}=useParams();const navigate=useNavigate();const[post,setPost]=useState({title:'',body:''});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[canEdit,setCanEdit]=useState(false);useEffect(()=>{axios.get(\"/notice/Postview/\".concat(no,\"/process/update\")).then(response=>{const{title,content}=response.data;setPost({title,body:content});setLoading(false);setCanEdit(true);}).catch(error=>{if(error.response&&error.response.status===403){alert('수정 권한이 없습니다.');navigate(\"/notice/PostView/\".concat(no));}else{console.error('게시글을 불러오는 중 오류가 발생했습니다!',error);setError('게시글을 불러오는 중 오류가 발생했습니다!');setLoading(false);}});},[no,navigate]);const onChange=event=>{const{value,name}=event.target;console.log(\"name: \".concat(name,\", value: \").concat(value));setPost({...post,[name]:value});};const updatePost=async event=>{event.preventDefault();try{await axios.post(\"/notice/Postview/\".concat(no,\"/process/update\"),{title:post.title,content:post.body});alert('수정되었습니다.');navigate(\"/notice/PostView/\".concat(no));}catch(error){if(error.response&&error.response.status===403){alert('수정 권한이 없습니다.');navigate(\"/notice/PostView/\".concat(no));}else{console.error('게시글을 수정하는 중 오류가 발생했습니다:',error);alert('게시글을 수정하는 중 오류가 발생했습니다:');}}};const backToList=()=>{navigate(\"/notice/PostView/\".concat(no));};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\uB85C\\uB529 \\uC911...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{children:error});}if(!canEdit){return/*#__PURE__*/_jsx(\"div\",{children:\"\\uC218\\uC815 \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});// 수정 권한이 없을 때 보여줄 내용\n}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CRUDHeader,{title:\"\\uACF5\\uC9C0\\uC0AC\\uD56D \\uAE00\\uC218\\uC815\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:updatePost,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"\\uC81C\\uBAA9\",value:post.title,onChange:onChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"body\",placeholder:\"\\uB0B4\\uC6A9\",value:post.body,onChange:onChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:backToList,children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\uC218\\uC815\\uD558\\uAE30\"})]})]});}export default UpdateNotice;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","CRUDHeader","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateNotice","no","navigate","post","setPost","title","body","loading","setLoading","error","setError","canEdit","setCanEdit","get","concat","then","response","content","data","catch","status","alert","console","onChange","event","value","name","target","log","updatePost","preventDefault","backToList","children","onSubmit","type","placeholder","onClick"],"sources":["/Users/eunyi/Documents/3-2/DB/shop/front-end/src/components/community/CRUD/UpdateNotice.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport CRUDHeader from './CRUDHeader';\nimport './CRUD.css';\nimport axios from 'axios';\n\nfunction UpdateNotice() {\n  const { no } = useParams();\n  const navigate = useNavigate();\n  const [post, setPost] = useState({\n    title: '',\n    body: '',\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n\n  useEffect(() => {\n    axios\n      .get(`/notice/Postview/${no}/process/update`)\n      .then((response) => {\n        const { title, content } = response.data;\n        setPost({ title, body: content });\n        setLoading(false);\n        setCanEdit(true);\n      })\n      .catch((error) => {\n        if (error.response && error.response.status === 403) {\n          alert('수정 권한이 없습니다.');\n          navigate(`/notice/PostView/${no}`);\n        } else {\n          console.error('게시글을 불러오는 중 오류가 발생했습니다!', error);\n          setError('게시글을 불러오는 중 오류가 발생했습니다!');\n          setLoading(false);\n        }\n      });\n  }, [no, navigate]);\n\n  const onChange = (event) => {\n    const { value, name } = event.target;\n    console.log(`name: ${name}, value: ${value}`);\n    setPost({\n      ...post,\n      [name]: value,\n    });\n  };\n\n  const updatePost = async (event) => {\n    event.preventDefault();\n    try {\n      await axios.post(`/notice/Postview/${no}/process/update`, { title: post.title, content: post.body });\n      alert('수정되었습니다.');\n      navigate(`/notice/PostView/${no}`);\n    } catch (error) {\n      if (error.response && error.response.status === 403) {\n        alert('수정 권한이 없습니다.');\n        navigate(`/notice/PostView/${no}`);\n      } else {\n        console.error('게시글을 수정하는 중 오류가 발생했습니다:', error);\n        alert('게시글을 수정하는 중 오류가 발생했습니다:');\n      }\n    }\n  };\n\n  const backToList = () => {\n    navigate(`/notice/PostView/${no}`);\n  };\n\n  if (loading) {\n    return <div>로딩 중...</div>;\n  }\n\n  if (error) {\n    return <div>{error}</div>;\n  }\n  if (!canEdit) {\n    return <div>수정 권한이 없습니다.</div>; // 수정 권한이 없을 때 보여줄 내용\n  }\n\n  return (\n    <>\n      <div>\n        <CRUDHeader title=\"공지사항 글수정\" />\n      </div>\n      <form onSubmit={updatePost}>\n        <div>\n          <span>제목</span>\n          <input type=\"text\" name=\"title\" placeholder=\"제목\" value={post.title} onChange={onChange} />\n        </div>\n        <br />\n        <div>\n          <span>내용</span>\n          <textarea name=\"body\" placeholder=\"내용\" value={post.body} onChange={onChange}></textarea>\n        </div>\n        <br />\n        <button type=\"button\" onClick={backToList}>\n          취소\n        </button>\n        <input type=\"submit\" value=\"수정하기\"></input>\n      </form>\n    </>\n  );\n}\n\nexport default UpdateNotice;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}