{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import io from\"socket.io-client\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io();const Chat=()=>{const[userId,setUserId]=useState(\"\");const[roomId,setRoomId]=useState(\"\");const[currentRoomId,setCurrentRoomId]=useState(\"\");const[message,setMessage]=useState(\"\");const[chat,setChat]=useState([]);useEffect(()=>{socket.on(\"receiveMessage\",message=>{setChat(prevChat=>[...prevChat,message]);});},[]);const joinRoom=()=>{socket.emit(\"joinRoom\",roomId);setCurrentRoomId(roomId);setRoomId(\"\");// Clear room input after joining\n};const sendMessage=()=>{if(currentRoomId&&userId){socket.emit(\"sendMessage\",{sender_id:userId,receiver_id:currentRoomId,content:message});setMessage(\"\");// Clear message input after sending\n}else{alert(\"Please join a room first and enter your User ID.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userId,onChange:e=>setUserId(e.target.value),placeholder:\"Enter your User ID\",disabled:!!currentRoomId}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:roomId,onChange:e=>setRoomId(e.target.value),placeholder:\"Enter Room ID\",disabled:!!currentRoomId}),/*#__PURE__*/_jsx(\"button\",{onClick:joinRoom,children:\"Join Room\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"chat\",children:chat.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[msg.sender_id,\": \",msg.content]},index))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Enter message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Send\"})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","io","jsx","_jsx","jsxs","_jsxs","socket","Chat","userId","setUserId","roomId","setRoomId","currentRoomId","setCurrentRoomId","message","setMessage","chat","setChat","on","prevChat","joinRoom","emit","sendMessage","sender_id","receiver_id","content","alert","children","type","value","onChange","e","target","placeholder","disabled","onClick","id","map","msg","index"],"sources":["C:/Users/atwod/OneDrive/바탕 화면/동국대 폴더/백엔드 공부/실전 2차/HackathonProject2_OutsideIn_UPGRADED/front-end/src/components/chattest/test.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst socket = io();\r\n\r\nconst Chat = () => {\r\n  const [userId, setUserId] = useState(\"\");\r\n  const [roomId, setRoomId] = useState(\"\");\r\n  const [currentRoomId, setCurrentRoomId] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [chat, setChat] = useState([]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"receiveMessage\", (message) => {\r\n      setChat((prevChat) => [...prevChat, message]);\r\n    });\r\n  }, []);\r\n\r\n  const joinRoom = () => {\r\n    socket.emit(\"joinRoom\", roomId);\r\n    setCurrentRoomId(roomId);\r\n    setRoomId(\"\"); // Clear room input after joining\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (currentRoomId && userId) {\r\n      socket.emit(\"sendMessage\", {\r\n        sender_id: userId,\r\n        receiver_id: currentRoomId,\r\n        content: message,\r\n      });\r\n      setMessage(\"\"); // Clear message input after sending\r\n    } else {\r\n      alert(\"Please join a room first and enter your User ID.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          value={userId}\r\n          onChange={(e) => setUserId(e.target.value)}\r\n          placeholder=\"Enter your User ID\"\r\n          disabled={!!currentRoomId}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          value={roomId}\r\n          onChange={(e) => setRoomId(e.target.value)}\r\n          placeholder=\"Enter Room ID\"\r\n          disabled={!!currentRoomId}\r\n        />\r\n        <button onClick={joinRoom}>Join Room</button>\r\n      </div>\r\n      <div id=\"chat\">\r\n        {chat.map((msg, index) => (\r\n          <div key={index}>\r\n            {msg.sender_id}: {msg.content}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        placeholder=\"Enter message\"\r\n      />\r\n      <button onClick={sendMessage}>Send</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}