{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation}from'react-router-dom';import axios from'axios';import TitleBodyCommunity from'./element/TitleBodyCommunity.js';import SelectButtonCommunity from'./element/SelectButtonCommunity.js';import ListCommunity from'./element/ListCommunity.js';import ColumnListCommunity from'./element/ColumnListCommunity.js';import RowListCommunity from'./element/RowListCommunity.js';import CreateButtonCommunity from'./element/CreateButtonCommunity.js';import PaginationCustom from'./element/PaginationCustom.js';import'./Community.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NoticeCommunity=()=>{const[dataList,setDataList]=useState([]);const[currentPage,setCurrentPage]=useState(1);const postsPerPage=10;const location=useLocation();const fetchData=async()=>{try{// 백엔드에서 게시글 목록을 가져옴\nconst response=await axios.post(\"/notice\");console.log('응답 데이터:',response.data);// 응답 데이터 출력\nsetDataList(Array.isArray(response.data)?response.data:[]);}catch(error){console.error('There was an error fetching the posts!',error);}};useEffect(()=>{fetchData();},[]);useEffect(()=>{if(location.state&&location.state.newPost){console.log('새 게시글 추가:',location.state.newPost);setDataList(prevDataList=>[location.state.newPost,...prevDataList]);}},[location.state]);const getNextNo=()=>{return dataList.length>0?Math.max(...dataList.map(post=>post.no))+1:1;};const indexOfLastPost=currentPage*postsPerPage;const indexOfFirstPost=indexOfLastPost-postsPerPage;const currentPosts=dataList.slice(indexOfFirstPost,indexOfLastPost);const handlePageChange=pageNumber=>{setCurrentPage(pageNumber);};return/*#__PURE__*/_jsxs(\"div\",{className:\"CommunityAll_layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"CommunityTop_layout\",children:[/*#__PURE__*/_jsx(TitleBodyCommunity,{title:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\",body:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\\uC744 \\uD655\\uC778\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"div\",{className:\"SelectButtonCommunity_layout\",children:/*#__PURE__*/_jsx(SelectButtonCommunity,{})})]}),/*#__PURE__*/_jsx(ListCommunity,{headersName:['제목','작성자','작성일'],children:currentPosts.length>0?currentPosts.map((item,index)=>/*#__PURE__*/_jsxs(RowListCommunity,{children:[/*#__PURE__*/_jsx(ColumnListCommunity,{children:/*#__PURE__*/_jsx(Link,{to:\"/notice/PostView/\".concat(item.no),style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(\"div\",{className:\"List_title\",children:item.title})})}),/*#__PURE__*/_jsx(ColumnListCommunity,{children:item.nickname}),/*#__PURE__*/_jsx(ColumnListCommunity,{children:item.created_date})]},index)):/*#__PURE__*/_jsx(\"div\",{children:\"\\uAC8C\\uC2DC\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})}),/*#__PURE__*/_jsx(CreateButtonCommunity,{emotion:\"notice\",nextNo:getNextNo()}),/*#__PURE__*/_jsx(\"div\",{className:\"PaginationCustom\",children:/*#__PURE__*/_jsx(PaginationCustom,{currentPage:currentPage,totalPages:Math.ceil(dataList.length/postsPerPage),onPageChange:handlePageChange})})]});};export default NoticeCommunity;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","axios","TitleBodyCommunity","SelectButtonCommunity","ListCommunity","ColumnListCommunity","RowListCommunity","CreateButtonCommunity","PaginationCustom","jsx","_jsx","jsxs","_jsxs","NoticeCommunity","dataList","setDataList","currentPage","setCurrentPage","postsPerPage","location","fetchData","response","post","console","log","data","Array","isArray","error","state","newPost","prevDataList","getNextNo","length","Math","max","map","no","indexOfLastPost","indexOfFirstPost","currentPosts","slice","handlePageChange","pageNumber","className","children","title","body","headersName","item","index","to","concat","style","textDecoration","nickname","created_date","emotion","nextNo","totalPages","ceil","onPageChange"],"sources":["C:/camputhon_practice/project2-검색/front-end/src/components/community/NoticeCommunity.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport TitleBodyCommunity from './element/TitleBodyCommunity.js';\r\nimport SelectButtonCommunity from './element/SelectButtonCommunity.js';\r\nimport ListCommunity from './element/ListCommunity.js';\r\nimport ColumnListCommunity from './element/ColumnListCommunity.js';\r\nimport RowListCommunity from './element/RowListCommunity.js';\r\nimport CreateButtonCommunity from './element/CreateButtonCommunity.js';\r\nimport PaginationCustom from './element/PaginationCustom.js';\r\n\r\nimport './Community.css';\r\n\r\nconst NoticeCommunity = () => {\r\n  const [dataList, setDataList] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const postsPerPage = 10;\r\n  const location = useLocation();\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      // 백엔드에서 게시글 목록을 가져옴\r\n      const response = await axios.post(`/notice`);\r\n      console.log('응답 데이터:', response.data); // 응답 데이터 출력\r\n      setDataList(Array.isArray(response.data) ? response.data : []);\r\n    } catch (error) {\r\n      console.error('There was an error fetching the posts!', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (location.state && location.state.newPost) {\r\n      console.log('새 게시글 추가:', location.state.newPost);\r\n      setDataList((prevDataList) => [location.state.newPost, ...prevDataList]);\r\n    }\r\n  }, [location.state]);\r\n\r\n  const getNextNo = () => {\r\n    return dataList.length > 0 ? Math.max(...dataList.map((post) => post.no)) + 1 : 1;\r\n  };\r\n\r\n  const indexOfLastPost = currentPage * postsPerPage;\r\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\r\n  const currentPosts = dataList.slice(indexOfFirstPost, indexOfLastPost);\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  return (\r\n    <div className=\"CommunityAll_layout\">\r\n      <div className=\"CommunityTop_layout\">\r\n        <TitleBodyCommunity title=\"공지사항\" body=\"공지사항을 확인하세요\" />\r\n        <div className=\"SelectButtonCommunity_layout\">\r\n          <SelectButtonCommunity />\r\n        </div>\r\n      </div>\r\n      <ListCommunity headersName={['제목', '작성자', '작성일']}>\r\n        {currentPosts.length > 0 ? (\r\n          currentPosts.map((item, index) => (\r\n            <RowListCommunity key={index}>\r\n              <ColumnListCommunity>\r\n                <Link to={`/notice/PostView/${item.no}`} style={{ textDecoration: 'none' }}>\r\n                  <div className=\"List_title\">{item.title}</div>\r\n                </Link>\r\n              </ColumnListCommunity>\r\n              <ColumnListCommunity>{item.nickname}</ColumnListCommunity>\r\n              <ColumnListCommunity>{item.created_date}</ColumnListCommunity>\r\n            </RowListCommunity>\r\n          ))\r\n        ) : (\r\n          <div>게시글이 없습니다.</div>\r\n        )}\r\n      </ListCommunity>\r\n      <CreateButtonCommunity emotion=\"notice\" nextNo={getNextNo()} />\r\n      <div className=\"PaginationCustom\">\r\n        <PaginationCustom\r\n          currentPage={currentPage}\r\n          totalPages={Math.ceil(dataList.length / postsPerPage)}\r\n          onPageChange={handlePageChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoticeCommunity;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,MAAO,CAAAC,kBAAkB,KAAM,iCAAiC,CAChE,MAAO,CAAAC,qBAAqB,KAAM,oCAAoC,CACtE,MAAO,CAAAC,aAAa,KAAM,4BAA4B,CACtD,MAAO,CAAAC,mBAAmB,KAAM,kCAAkC,CAClE,MAAO,CAAAC,gBAAgB,KAAM,+BAA+B,CAC5D,MAAO,CAAAC,qBAAqB,KAAM,oCAAoC,CACtE,MAAO,CAAAC,gBAAgB,KAAM,+BAA+B,CAE5D,MAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzB,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAAqB,YAAY,CAAG,EAAE,CACvB,KAAM,CAAAC,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAoB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,KAAK,CAACqB,IAAI,UAAU,CAAC,CAC5CC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEH,QAAQ,CAACI,IAAI,CAAC,CAAE;AACvCV,WAAW,CAACW,KAAK,CAACC,OAAO,CAACN,QAAQ,CAACI,IAAI,CAAC,CAAGJ,QAAQ,CAACI,IAAI,CAAG,EAAE,CAAC,CAChE,CAAE,MAAOG,KAAK,CAAE,CACdL,OAAO,CAACK,KAAK,CAAC,wCAAwC,CAAEA,KAAK,CAAC,CAChE,CACF,CAAC,CAED9B,SAAS,CAAC,IAAM,CACdsB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAENtB,SAAS,CAAC,IAAM,CACd,GAAIqB,QAAQ,CAACU,KAAK,EAAIV,QAAQ,CAACU,KAAK,CAACC,OAAO,CAAE,CAC5CP,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEL,QAAQ,CAACU,KAAK,CAACC,OAAO,CAAC,CAChDf,WAAW,CAAEgB,YAAY,EAAK,CAACZ,QAAQ,CAACU,KAAK,CAACC,OAAO,CAAE,GAAGC,YAAY,CAAC,CAAC,CAC1E,CACF,CAAC,CAAE,CAACZ,QAAQ,CAACU,KAAK,CAAC,CAAC,CAEpB,KAAM,CAAAG,SAAS,CAAGA,CAAA,GAAM,CACtB,MAAO,CAAAlB,QAAQ,CAACmB,MAAM,CAAG,CAAC,CAAGC,IAAI,CAACC,GAAG,CAAC,GAAGrB,QAAQ,CAACsB,GAAG,CAAEd,IAAI,EAAKA,IAAI,CAACe,EAAE,CAAC,CAAC,CAAG,CAAC,CAAG,CAAC,CACnF,CAAC,CAED,KAAM,CAAAC,eAAe,CAAGtB,WAAW,CAAGE,YAAY,CAClD,KAAM,CAAAqB,gBAAgB,CAAGD,eAAe,CAAGpB,YAAY,CACvD,KAAM,CAAAsB,YAAY,CAAG1B,QAAQ,CAAC2B,KAAK,CAACF,gBAAgB,CAAED,eAAe,CAAC,CAEtE,KAAM,CAAAI,gBAAgB,CAAIC,UAAU,EAAK,CACvC1B,cAAc,CAAC0B,UAAU,CAAC,CAC5B,CAAC,CAED,mBACE/B,KAAA,QAAKgC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCjC,KAAA,QAAKgC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCnC,IAAA,CAACR,kBAAkB,EAAC4C,KAAK,CAAC,0BAAM,CAACC,IAAI,CAAC,+DAAa,CAAE,CAAC,cACtDrC,IAAA,QAAKkC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CnC,IAAA,CAACP,qBAAqB,GAAE,CAAC,CACtB,CAAC,EACH,CAAC,cACNO,IAAA,CAACN,aAAa,EAAC4C,WAAW,CAAE,CAAC,IAAI,CAAE,KAAK,CAAE,KAAK,CAAE,CAAAH,QAAA,CAC9CL,YAAY,CAACP,MAAM,CAAG,CAAC,CACtBO,YAAY,CAACJ,GAAG,CAAC,CAACa,IAAI,CAAEC,KAAK,gBAC3BtC,KAAA,CAACN,gBAAgB,EAAAuC,QAAA,eACfnC,IAAA,CAACL,mBAAmB,EAAAwC,QAAA,cAClBnC,IAAA,CAACX,IAAI,EAACoD,EAAE,qBAAAC,MAAA,CAAsBH,IAAI,CAACZ,EAAE,CAAG,CAACgB,KAAK,CAAE,CAAEC,cAAc,CAAE,MAAO,CAAE,CAAAT,QAAA,cACzEnC,IAAA,QAAKkC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEI,IAAI,CAACH,KAAK,CAAM,CAAC,CAC1C,CAAC,CACY,CAAC,cACtBpC,IAAA,CAACL,mBAAmB,EAAAwC,QAAA,CAAEI,IAAI,CAACM,QAAQ,CAAsB,CAAC,cAC1D7C,IAAA,CAACL,mBAAmB,EAAAwC,QAAA,CAAEI,IAAI,CAACO,YAAY,CAAsB,CAAC,GAPzCN,KAQL,CACnB,CAAC,cAEFxC,IAAA,QAAAmC,QAAA,CAAK,oDAAU,CAAK,CACrB,CACY,CAAC,cAChBnC,IAAA,CAACH,qBAAqB,EAACkD,OAAO,CAAC,QAAQ,CAACC,MAAM,CAAE1B,SAAS,CAAC,CAAE,CAAE,CAAC,cAC/DtB,IAAA,QAAKkC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BnC,IAAA,CAACF,gBAAgB,EACfQ,WAAW,CAAEA,WAAY,CACzB2C,UAAU,CAAEzB,IAAI,CAAC0B,IAAI,CAAC9C,QAAQ,CAACmB,MAAM,CAAGf,YAAY,CAAE,CACtD2C,YAAY,CAAEnB,gBAAiB,CAChC,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}