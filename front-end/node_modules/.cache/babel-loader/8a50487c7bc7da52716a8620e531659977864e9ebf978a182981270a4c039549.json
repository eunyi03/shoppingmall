{"ast":null,"code":"var _jsxFileName = \"/Users/eunyi/Documents/3-2/DB/shop/front-end/src/components/community/CRUD/UpdateNotice.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport CRUDHeader from './CRUDHeader';\nimport './CRUD.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UpdateNotice() {\n  _s();\n  const {\n    no\n  } = useParams();\n  const navigate = useNavigate();\n  const [post, setPost] = useState({\n    title: '',\n    body: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n  useEffect(() => {\n    axios.get(`/notice/Postview/${no}/process/update`).then(response => {\n      const {\n        title,\n        content\n      } = response.data;\n      setPost({\n        title,\n        body: content\n      });\n      setLoading(false);\n      setCanEdit(true);\n    }).catch(error => {\n      if (error.response && error.response.status === 403) {\n        alert('수정 권한이 없습니다.');\n        navigate(`/notice/PostView/${no}`);\n      } else {\n        console.error('게시글을 불러오는 중 오류가 발생했습니다!', error);\n        setError('게시글을 불러오는 중 오류가 발생했습니다!');\n        setLoading(false);\n      }\n    });\n  }, [no, navigate]);\n  const onChange = event => {\n    const {\n      value,\n      name\n    } = event.target;\n    console.log(`name: ${name}, value: ${value}`);\n    setPost({\n      ...post,\n      [name]: value\n    });\n  };\n  const updatePost = async event => {\n    event.preventDefault();\n    try {\n      await axios.post(`/notice/Postview/${no}/process/update`, {\n        title: post.title,\n        content: post.body\n      });\n      alert('수정되었습니다.');\n      navigate(`/notice/PostView/${no}`);\n    } catch (error) {\n      if (error.response && error.response.status === 403) {\n        alert('수정 권한이 없습니다.');\n        navigate(`/notice/PostView/${no}`);\n      } else {\n        console.error('게시글을 수정하는 중 오류가 발생했습니다:', error);\n        alert('게시글을 수정하는 중 오류가 발생했습니다:');\n      }\n    }\n  };\n  const backToList = () => {\n    navigate(`/notice/PostView/${no}`);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\uB85C\\uB529 \\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }, this);\n  }\n  if (!canEdit) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\uC218\\uC815 \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 12\n    }, this); // 수정 권한이 없을 때 보여줄 내용\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(CRUDHeader, {\n        title: \"\\uACF5\\uC9C0\\uC0AC\\uD56D \\uAE00\\uC218\\uC815\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: updatePost,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uC81C\\uBAA9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          placeholder: \"\\uC81C\\uBAA9\",\n          value: post.title,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uB0B4\\uC6A9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"body\",\n          placeholder: \"\\uB0B4\\uC6A9\",\n          value: post.body,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: backToList,\n        children: \"\\uCDE8\\uC18C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"\\uC218\\uC815\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(UpdateNotice, \"VQZNbkxhbqMJBBZCN7P/DwJFo+U=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = UpdateNotice;\nexport default UpdateNotice;\nvar _c;\n$RefreshReg$(_c, \"UpdateNotice\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","CRUDHeader","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","UpdateNotice","_s","no","navigate","post","setPost","title","body","loading","setLoading","error","setError","canEdit","setCanEdit","get","then","response","content","data","catch","status","alert","console","onChange","event","value","name","target","log","updatePost","preventDefault","backToList","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onClick","_c","$RefreshReg$"],"sources":["/Users/eunyi/Documents/3-2/DB/shop/front-end/src/components/community/CRUD/UpdateNotice.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport CRUDHeader from './CRUDHeader';\nimport './CRUD.css';\nimport axios from 'axios';\n\nfunction UpdateNotice() {\n  const { no } = useParams();\n  const navigate = useNavigate();\n  const [post, setPost] = useState({\n    title: '',\n    body: '',\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n\n  useEffect(() => {\n    axios\n      .get(`/notice/Postview/${no}/process/update`)\n      .then((response) => {\n        const { title, content } = response.data;\n        setPost({ title, body: content });\n        setLoading(false);\n        setCanEdit(true);\n      })\n      .catch((error) => {\n        if (error.response && error.response.status === 403) {\n          alert('수정 권한이 없습니다.');\n          navigate(`/notice/PostView/${no}`);\n        } else {\n          console.error('게시글을 불러오는 중 오류가 발생했습니다!', error);\n          setError('게시글을 불러오는 중 오류가 발생했습니다!');\n          setLoading(false);\n        }\n      });\n  }, [no, navigate]);\n\n  const onChange = (event) => {\n    const { value, name } = event.target;\n    console.log(`name: ${name}, value: ${value}`);\n    setPost({\n      ...post,\n      [name]: value,\n    });\n  };\n\n  const updatePost = async (event) => {\n    event.preventDefault();\n    try {\n      await axios.post(`/notice/Postview/${no}/process/update`, { title: post.title, content: post.body });\n      alert('수정되었습니다.');\n      navigate(`/notice/PostView/${no}`);\n    } catch (error) {\n      if (error.response && error.response.status === 403) {\n        alert('수정 권한이 없습니다.');\n        navigate(`/notice/PostView/${no}`);\n      } else {\n        console.error('게시글을 수정하는 중 오류가 발생했습니다:', error);\n        alert('게시글을 수정하는 중 오류가 발생했습니다:');\n      }\n    }\n  };\n\n  const backToList = () => {\n    navigate(`/notice/PostView/${no}`);\n  };\n\n  if (loading) {\n    return <div>로딩 중...</div>;\n  }\n\n  if (error) {\n    return <div>{error}</div>;\n  }\n  if (!canEdit) {\n    return <div>수정 권한이 없습니다.</div>; // 수정 권한이 없을 때 보여줄 내용\n  }\n\n  return (\n    <>\n      <div>\n        <CRUDHeader title=\"공지사항 글수정\" />\n      </div>\n      <form onSubmit={updatePost}>\n        <div>\n          <span>제목</span>\n          <input type=\"text\" name=\"title\" placeholder=\"제목\" value={post.title} onChange={onChange} />\n        </div>\n        <br />\n        <div>\n          <span>내용</span>\n          <textarea name=\"body\" placeholder=\"내용\" value={post.body} onChange={onChange}></textarea>\n        </div>\n        <br />\n        <button type=\"button\" onClick={backToList}>\n          취소\n        </button>\n        <input type=\"submit\" value=\"수정하기\"></input>\n      </form>\n    </>\n  );\n}\n\nexport default UpdateNotice;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAO,YAAY;AACnB,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE1B,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACtB,MAAM;IAAEC;EAAG,CAAC,GAAGV,SAAS,CAAC,CAAC;EAC1B,MAAMW,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC;IAC/BgB,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE;EACR,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACoB,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACsB,OAAO,EAAEC,UAAU,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EAE7CC,SAAS,CAAC,MAAM;IACdI,KAAK,CACFmB,GAAG,CAAC,oBAAoBZ,EAAE,iBAAiB,CAAC,CAC5Ca,IAAI,CAAEC,QAAQ,IAAK;MAClB,MAAM;QAAEV,KAAK;QAAEW;MAAQ,CAAC,GAAGD,QAAQ,CAACE,IAAI;MACxCb,OAAO,CAAC;QAAEC,KAAK;QAAEC,IAAI,EAAEU;MAAQ,CAAC,CAAC;MACjCR,UAAU,CAAC,KAAK,CAAC;MACjBI,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC,CAAC,CACDM,KAAK,CAAET,KAAK,IAAK;MAChB,IAAIA,KAAK,CAACM,QAAQ,IAAIN,KAAK,CAACM,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QACnDC,KAAK,CAAC,cAAc,CAAC;QACrBlB,QAAQ,CAAC,oBAAoBD,EAAE,EAAE,CAAC;MACpC,CAAC,MAAM;QACLoB,OAAO,CAACZ,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/CC,QAAQ,CAAC,yBAAyB,CAAC;QACnCF,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,CAAC;EACN,CAAC,EAAE,CAACP,EAAE,EAAEC,QAAQ,CAAC,CAAC;EAElB,MAAMoB,QAAQ,GAAIC,KAAK,IAAK;IAC1B,MAAM;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAGF,KAAK,CAACG,MAAM;IACpCL,OAAO,CAACM,GAAG,CAAC,SAASF,IAAI,YAAYD,KAAK,EAAE,CAAC;IAC7CpB,OAAO,CAAC;MACN,GAAGD,IAAI;MACP,CAACsB,IAAI,GAAGD;IACV,CAAC,CAAC;EACJ,CAAC;EAED,MAAMI,UAAU,GAAG,MAAOL,KAAK,IAAK;IAClCA,KAAK,CAACM,cAAc,CAAC,CAAC;IACtB,IAAI;MACF,MAAMnC,KAAK,CAACS,IAAI,CAAC,oBAAoBF,EAAE,iBAAiB,EAAE;QAAEI,KAAK,EAAEF,IAAI,CAACE,KAAK;QAAEW,OAAO,EAAEb,IAAI,CAACG;MAAK,CAAC,CAAC;MACpGc,KAAK,CAAC,UAAU,CAAC;MACjBlB,QAAQ,CAAC,oBAAoBD,EAAE,EAAE,CAAC;IACpC,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACd,IAAIA,KAAK,CAACM,QAAQ,IAAIN,KAAK,CAACM,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QACnDC,KAAK,CAAC,cAAc,CAAC;QACrBlB,QAAQ,CAAC,oBAAoBD,EAAE,EAAE,CAAC;MACpC,CAAC,MAAM;QACLoB,OAAO,CAACZ,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/CW,KAAK,CAAC,yBAAyB,CAAC;MAClC;IACF;EACF,CAAC;EAED,MAAMU,UAAU,GAAGA,CAAA,KAAM;IACvB5B,QAAQ,CAAC,oBAAoBD,EAAE,EAAE,CAAC;EACpC,CAAC;EAED,IAAIM,OAAO,EAAE;IACX,oBAAOX,OAAA;MAAAmC,QAAA,EAAK;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC3B;EAEA,IAAI1B,KAAK,EAAE;IACT,oBAAOb,OAAA;MAAAmC,QAAA,EAAMtB;IAAK;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAC3B;EACA,IAAI,CAACxB,OAAO,EAAE;IACZ,oBAAOf,OAAA;MAAAmC,QAAA,EAAK;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,CAAC,CAAC;EAClC;EAEA,oBACEvC,OAAA,CAAAE,SAAA;IAAAiC,QAAA,gBACEnC,OAAA;MAAAmC,QAAA,eACEnC,OAAA,CAACH,UAAU;QAACY,KAAK,EAAC;MAAU;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CAAC,eACNvC,OAAA;MAAMwC,QAAQ,EAAER,UAAW;MAAAG,QAAA,gBACzBnC,OAAA;QAAAmC,QAAA,gBACEnC,OAAA;UAAAmC,QAAA,EAAM;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACfvC,OAAA;UAAOyC,IAAI,EAAC,MAAM;UAACZ,IAAI,EAAC,OAAO;UAACa,WAAW,EAAC,cAAI;UAACd,KAAK,EAAErB,IAAI,CAACE,KAAM;UAACiB,QAAQ,EAAEA;QAAS;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvF,CAAC,eACNvC,OAAA;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvC,OAAA;QAAAmC,QAAA,gBACEnC,OAAA;UAAAmC,QAAA,EAAM;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACfvC,OAAA;UAAU6B,IAAI,EAAC,MAAM;UAACa,WAAW,EAAC,cAAI;UAACd,KAAK,EAAErB,IAAI,CAACG,IAAK;UAACgB,QAAQ,EAAEA;QAAS;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAW,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrF,CAAC,eACNvC,OAAA;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvC,OAAA;QAAQyC,IAAI,EAAC,QAAQ;QAACE,OAAO,EAAET,UAAW;QAAAC,QAAA,EAAC;MAE3C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTvC,OAAA;QAAOyC,IAAI,EAAC,QAAQ;QAACb,KAAK,EAAC;MAAM;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtC,CAAC;EAAA,eACP,CAAC;AAEP;AAACnC,EAAA,CAhGQD,YAAY;EAAA,QACJR,SAAS,EACPC,WAAW;AAAA;AAAAgD,EAAA,GAFrBzC,YAAY;AAkGrB,eAAeA,YAAY;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}