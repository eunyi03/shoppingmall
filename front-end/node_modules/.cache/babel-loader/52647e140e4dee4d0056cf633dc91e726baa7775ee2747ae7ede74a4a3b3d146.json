{"ast":null,"code":"import React,{useState,useEffect}from'react';import CommonTable2 from'./chatList/CommonTable2';import CommonTableColumn2 from'./chatList/CommonTableColumn2';import CommonTableRow2 from'./chatList/CommonTableRow2';import'./Chat.css';import Chatroom from'./Chatroom.js';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Chat=_ref=>{let{roomid,selectedRoomId,handleSelectRoom}=_ref;const[dataList,setDataList]=useState([]);const[currentPage,setCurrentPage]=useState(1);const postsPerPage=5;useEffect(()=>{axios.post('/process/chat').then(response=>{setDataList(response.data);}).catch(error=>{console.error('There was an error fetching the posts!',error);});},[]);const indexOfLastPost=currentPage*postsPerPage;const indexOfFirstPost=indexOfLastPost-postsPerPage;const currentPosts=Array.isArray(dataList)?dataList.slice(indexOfFirstPost,indexOfLastPost):[];const getShadowClass=state=>{switch(state){case'우울':return'state_color sadness';case'불안':return'state_color anxiety';case'강박':return'state_color fear';default:return'state_color';}};const handleChatItemClick=(my_roomid,roomId)=>{window.parent.postMessage({roomId},'*');// handleSelectRoom(my_roomid, roomId);\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chatTop\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Chat List\"})}),/*#__PURE__*/_jsx(\"ul\",{children:currentPosts.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img_name\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user_nickname\",children:item.nickname}),/*#__PURE__*/_jsx(\"span\",{className:\"state_color \".concat(getShadowClass(item.state)),children:item.state})]}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-item\",onClick:()=>handleChatItemClick(roomid,item.roomId),children:\"\\uCC44\\uD305\"})]},item.roomId))})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","CommonTable2","CommonTableColumn2","CommonTableRow2","Chatroom","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chat","_ref","roomid","selectedRoomId","handleSelectRoom","dataList","setDataList","currentPage","setCurrentPage","postsPerPage","post","then","response","data","catch","error","console","indexOfLastPost","indexOfFirstPost","currentPosts","Array","isArray","slice","getShadowClass","state","handleChatItemClick","my_roomid","roomId","window","parent","postMessage","children","className","map","item","nickname","concat","onClick"],"sources":["/Users/eunyi/Documents/3-2/DB/shop/front-end/src/components/chat/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport CommonTable2 from './chatList/CommonTable2';\nimport CommonTableColumn2 from './chatList/CommonTableColumn2';\nimport CommonTableRow2 from './chatList/CommonTableRow2';\nimport './Chat.css';\nimport Chatroom from './Chatroom.js';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst Chat = ({ roomid, selectedRoomId, handleSelectRoom }) => {\n  const [dataList, setDataList] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const postsPerPage = 5;\n\n  useEffect(() => {\n    axios\n      .post('/process/chat')\n      .then((response) => {\n        setDataList(response.data);\n      })\n      .catch((error) => {\n        console.error('There was an error fetching the posts!', error);\n      });\n  }, []);\n\n  const indexOfLastPost = currentPage * postsPerPage;\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\n  const currentPosts = Array.isArray(dataList) ? dataList.slice(indexOfFirstPost, indexOfLastPost) : [];\n\n  const getShadowClass = (state) => {\n    switch (state) {\n      case '우울':\n        return 'state_color sadness';\n      case '불안':\n        return 'state_color anxiety';\n      case '강박':\n        return 'state_color fear';\n      default:\n        return 'state_color';\n    }\n  };\n\n  const handleChatItemClick = (my_roomid, roomId) => {\n    window.parent.postMessage({ roomId }, '*');\n    // handleSelectRoom(my_roomid, roomId);\n  };\n\n  return (\n    <>\n      <div className=\"chatTop\">\n        <h1>Chat List</h1>\n      </div>\n      <ul>\n        {currentPosts.map((item) => (\n          <li key={item.roomId}>\n            <div className=\"img_name\">\n              <span className=\"user_nickname\">{item.nickname}</span>\n              <span className={`state_color ${getShadowClass(item.state)}`}>{item.state}</span>\n            </div>\n            <button className=\"chat-item\" onClick={() => handleChatItemClick(roomid, item.roomId)}>\n              채팅\n            </button>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}