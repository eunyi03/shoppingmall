{"ast":null,"code":"import React,{useState,useEffect}from'react';import CommonTable2 from'./chatList/CommonTable2';import CommonTableColumn2 from'./chatList/CommonTableColumn2';import CommonTableRow2 from'./chatList/CommonTableRow2';import'./Chat.css';import Chatroom from'./Chatroom.js';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Chat=_ref=>{let{roomid,selectedRoomId,handleSelectRoom}=_ref;const[dataList,setDataList]=useState([]);const[currentPage,setCurrentPage]=useState(1);const postsPerPage=5;useEffect(()=>{axios.post('/process/chat').then(response=>{setDataList(response.data);}).catch(error=>{console.error('There was an error fetching the posts!',error);});},[]);const indexOfLastPost=currentPage*postsPerPage;const indexOfFirstPost=indexOfLastPost-postsPerPage;const currentPosts=Array.isArray(dataList)?dataList.slice(indexOfFirstPost,indexOfLastPost):[];const getShadowClass=state=>{switch(state){case'우울':return'state_color sadness';case'불안':return'state_color anxiety';case'강박':return'state_color fear';default:return'state_color';}};const handleChatItemClick=(my_roomid,roomId)=>{window.parent.postMessage({roomId},'*');// handleSelectRoom(my_roomid, roomId);\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chatTop\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Chat List\"})}),/*#__PURE__*/_jsx(\"ul\",{children:currentPosts.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img_name\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user_nickname\",children:item.nickname}),/*#__PURE__*/_jsx(\"span\",{className:\"state_color \".concat(getShadowClass(item.state)),children:item.state})]}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-item\",onClick:()=>handleChatItemClick(roomid,item.roomId),children:\"\\uCC44\\uD305\"})]},item.roomId))})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","CommonTable2","CommonTableColumn2","CommonTableRow2","Chatroom","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chat","_ref","roomid","selectedRoomId","handleSelectRoom","dataList","setDataList","currentPage","setCurrentPage","postsPerPage","post","then","response","data","catch","error","console","indexOfLastPost","indexOfFirstPost","currentPosts","Array","isArray","slice","getShadowClass","state","handleChatItemClick","my_roomid","roomId","window","parent","postMessage","children","className","map","item","nickname","concat","onClick"],"sources":["C:/Users/atwod/OneDrive/바탕 화면/동국대 폴더/백엔드 공부/실전 2차/HackathonProject2_OutsideIn_UPGRADED/front-end/src/components/chat/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport CommonTable2 from './chatList/CommonTable2';\r\nimport CommonTableColumn2 from './chatList/CommonTableColumn2';\r\nimport CommonTableRow2 from './chatList/CommonTableRow2';\r\nimport './Chat.css';\r\nimport Chatroom from './Chatroom.js';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Chat = ({ roomid, selectedRoomId, handleSelectRoom }) => {\r\n  const [dataList, setDataList] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const postsPerPage = 5;\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post('/process/chat')\r\n      .then((response) => {\r\n        setDataList(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.error('There was an error fetching the posts!', error);\r\n      });\r\n  }, []);\r\n\r\n  const indexOfLastPost = currentPage * postsPerPage;\r\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\r\n  const currentPosts = Array.isArray(dataList) ? dataList.slice(indexOfFirstPost, indexOfLastPost) : [];\r\n\r\n  const getShadowClass = (state) => {\r\n    switch (state) {\r\n      case '우울':\r\n        return 'state_color sadness';\r\n      case '불안':\r\n        return 'state_color anxiety';\r\n      case '강박':\r\n        return 'state_color fear';\r\n      default:\r\n        return 'state_color';\r\n    }\r\n  };\r\n\r\n  const handleChatItemClick = (my_roomid, roomId) => {\r\n    window.parent.postMessage({ roomId }, '*');\r\n    // handleSelectRoom(my_roomid, roomId);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"chatTop\">\r\n        <h1>Chat List</h1>\r\n      </div>\r\n      <ul>\r\n        {currentPosts.map((item) => (\r\n          <li key={item.roomId}>\r\n            <div className=\"img_name\">\r\n              <span className=\"user_nickname\">{item.nickname}</span>\r\n              <span className={`state_color ${getShadowClass(item.state)}`}>{item.state}</span>\r\n            </div>\r\n            <button className=\"chat-item\" onClick={() => handleChatItemClick(roomid, item.roomId)}>\r\n              채팅\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}